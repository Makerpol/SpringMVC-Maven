<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.makerpol.dao.UserMapper" >
  <resultMap id="BaseResultMap" type="com.makerpol.entity.User" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="password" property="password" jdbcType="VARCHAR" />
    <result column="alias" property="alias" jdbcType="VARCHAR" />
    <result column="sex" property="sex" jdbcType="INTEGER" />
    <result column="phone" property="phone" jdbcType="BIGINT" />
    <result column="email" property="email" jdbcType="VARCHAR" />
    <result column="birthday" property="birthday" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="INTEGER" />
  </resultMap>
  
  <!-- 与相应Mapper接口中同名的方法对应 -->
	<!-- id和mapper接口中的方法名对应，resultType使用mybatis.xml中的别名 -->
	<!-- userResultMap是user-mapper.xml中定义的resultmap -->
	<!-- 获取所有用户信息 -->
	<select id="getAllUser" resultType="list" resultMap="userResultMap">
         <![CDATA[         
              select * from tb_user   
         ]]> 
	</select>     
   
	<select id="getUserById" parameterType="int" resultType="com.hoo.entity.User" resultMap="userResultMap">    
         <![CDATA[        
             select * from tb_user where id = #{id}    
         ]]>    
	</select>  
     
	<select id="getUserByName" parameterType="string" resultType="com.hoo.entity.User" resultMap="userResultMap">         
         select * from tb_user where name = #{name}        
	</select>
	
	<update id="updataUser" parameterType="user">
		update tb_user set
        <if test="status != null">status = #{status}</if>     
        <if test="password != null">,password = #{password}</if>
        <if test="sex != null">,sex = #{sex}</if>
        <if test="email != null">,email = #{email}</if>
        <if test="birthday != null">,birthday = #{birthday}</if>
        <if test="alias != null">,alias = #{alias}</if>
        <if test="phone != null">,phone = #{phone}</if>
        where name = #{name} 
   </update> 
   
   <!-- 自动生成id策略 -->  
   <insert id="addUser" useGeneratedKeys="true" keyProperty="id" parameterType="user">   
         insert into tb_user(status, name, password, sex, alias, birthday, phone)   
         values(#{status}, #{name}, #{password}, #{sex}, #{alias}, #{birthday}, #{phone})   
   </insert> 
    
    <delete id="deleteUser" parameterType="int">
        delete from tb_user where id = #{id} 
   </delete>
</mapper>